<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulasi Tarif Carter - Logistik Kita</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }
    .container {
      max-width: 720px;
      margin-top: 2rem;
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #ba1a1a;
    }
    #hasilPopup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #hasilPopup .popup-box {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      max-width: 400px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4">📦 Simulasi Tarif Carter</h1><div class="mb-3">
  <label class="form-label">📍 Lokasi Garasi (Default)</label>
  <input type="text" class="form-control" value="Logistik Kita" disabled>
</div>

<div id="penjemputan-container">
  <label class="form-label">🚚 Lokasi Penjemputan</label>
  <div class="row g-2 mb-2">
    <div class="col-md-6"><input type="text" class="form-control lokasi-jemput" placeholder="Nama Lokasi" /></div>
    <div class="col-md-3"><input type="number" class="form-control km-jemput" placeholder="Jarak (km)" /></div>
  </div>
</div>
<button onclick="tambahJemput()" class="btn btn-outline-danger btn-sm mb-3">+ Tambah Lokasi Jemput</button>

<div id="bongkar-container">
  <label class="form-label">🏁 Lokasi Tujuan/Bongkar</label>
  <div class="row g-2 mb-2">
    <div class="col-md-6"><input type="text" class="form-control lokasi-bongkar" placeholder="Nama Lokasi" /></div>
    <div class="col-md-3"><input type="number" class="form-control km-bongkar" placeholder="Jarak (km)" /></div>
  </div>
</div>
<button onclick="tambahBongkar()" class="btn btn-outline-danger btn-sm mb-3">+ Tambah Lokasi Bongkar</button>

<div class="form-check mb-3">
  <input class="form-check-input" type="checkbox" id="kembaliGarasi">
  <label class="form-check-label" for="kembaliGarasi">Kembali ke Garasi</label>
</div>

<div class="mb-3">
  <label class="form-label">📦 Nama Barang</label>
  <input type="text" class="form-control" id="namaBarang">
</div>

<div class="mb-3">
  <label class="form-label">⚖️ Berat Barang (kg)</label>
  <input type="number" class="form-control" id="beratBarang">
</div>

<div class="mb-3">
  <label class="form-label">🧑‍🔧 Biaya TKBM (Opsional)</label>
  <input type="number" class="form-control" id="tkbm" placeholder="75000 / 90000 / 100000">
</div>

<div class="mb-3">
  <label class="form-label">⛽ Harga BBM / liter</label>
  <input type="number" class="form-control" id="hargaBBM" value="10000">
</div>

<div class="mb-3">
  <label class="form-label">👤 Jenis Customer</label>
  <div class="form-check">
    <input class="form-check-input" type="radio" name="tipeCustomer" value="perorangan" checked />
    <label class="form-check-label">Perorangan (PPH 2%)</label>
  </div>
  <div class="form-check">
    <input class="form-check-input" type="radio" name="tipeCustomer" value="perusahaan" />
    <label class="form-check-label">Perusahaan (PPN 12% + PPH 2%)</label>
  </div>
</div>

<button onclick="cekTarif()" class="btn btn-danger">🧮 Cek Tarif</button>

<div id="hasilPopup">
  <div class="popup-box">
    <h5 class="mb-3">💰 Estimasi Tarif Carter</h5>
    <div id="hasilTarif"></div>
    <small class="text-muted d-block mt-3">* Estimasi tarif belum termasuk biaya TKBM jika tidak diinput<br>* Hubungi Admin Logistik Kita untuk info selengkapnya</small>
    <button onclick="tutupPopup()" class="btn btn-outline-secondary btn-sm mt-3">Tutup</button>
  </div>
</div>

  </div>  <script>
    const konsumsiBBM = () => 9;
    const hargaPerLiter = () => parseFloat(document.getElementById("hargaBBM").value || 10000);

    function tambahJemput() {
      const container = document.getElementById("penjemputan-container");
      container.insertAdjacentHTML("beforeend", `
        <div class="row g-2 mb-2">
          <div class="col-md-6"><input type="text" class="form-control lokasi-jemput" placeholder="Nama Lokasi" /></div>
          <div class="col-md-3"><input type="number" class="form-control km-jemput" placeholder="Jarak (km)" /></div>
        </div>`);
    }

    function tambahBongkar() {
      const container = document.getElementById("bongkar-container");
      container.insertAdjacentHTML("beforeend", `
        <div class="row g-2 mb-2">
          <div class="col-md-6"><input type="text" class="form-control lokasi-bongkar" placeholder="Nama Lokasi" /></div>
          <div class="col-md-3"><input type="number" class="form-control km-bongkar" placeholder="Jarak (km)" /></div>
        </div>`);
    }

    function cekTarif() {
      const kmJemput = Array.from(document.querySelectorAll(".km-jemput")).map(el => parseFloat(el.value) || 0);
      const kmBongkar = Array.from(document.querySelectorAll(".km-bongkar")).map(el => parseFloat(el.value) || 0);
      const kembali = document.getElementById("kembaliGarasi").checked ? (kmBongkar.at(-1) || 0) : 0;
      const totalKM = kmJemput.reduce((a,b)=>a+b,0) + kmBongkar.reduce((a,b)=>a+b,0) + kembali;

      const totalBBM = (totalKM / konsumsiBBM()) * hargaPerLiter();
      const berat = parseFloat(document.getElementById("beratBarang").value || 0);
      const tkbm = parseFloat(document.getElementById("tkbm").value || 0);
      const estimasiWaktu = totalKM / 80;

      let armada = '';
      let sewaMobil = 0;
      if (berat <= 1300) {
        armada = "Granmax Pickup";
        if (estimasiWaktu <= 6) sewaMobil = 100000;
        else if (estimasiWaktu <= 12) sewaMobil = 150000;
        else sewaMobil = 200000;
      } else if (berat <= 2500) {
        armada = "L300 Pickup";
        if (estimasiWaktu <= 6) sewaMobil = 200000;
        else if (estimasiWaktu <= 12) sewaMobil = 250000;
        else sewaMobil = 350000;
      } else {
        armada = "Armada Khusus";
      }

      let tarifDasar = totalBBM + sewaMobil + tkbm;
      const tipe = document.querySelector('input[name="tipeCustomer"]:checked')?.value || "perorangan";
      let tarifFinal = tarifDasar;
      if (tipe === "perorangan") tarifFinal *= 1.02;
      else if (tipe === "perusahaan") tarifFinal *= 1.14;

      const hasil = `
        <ul>
          <li>📏 Total Jarak: <strong>${totalKM.toFixed(1)} km</strong></li>
          <li>🚛 Armada: <strong>${armada}</strong></li>
          <li>⛽ Estimasi BBM: Rp${totalBBM.toFixed(0).toLocaleString()}</li>
          <li>🚚 Sewa Mobil: Rp${sewaMobil.toLocaleString()}</li>
          ${tkbm > 0 ? `<li>🧑‍🔧 TKBM: Rp${tkbm.toLocaleString()}</li>` : ""}
          <li>💵 Total Estimasi Tarif <strong>(sudah termasuk pajak)</strong>: <span class="text-success fw-bold">Rp${Math.round(tarifFinal).toLocaleString()}</span></li>
        </ul>`;
      document.getElementById("hasilTarif").innerHTML = hasil;
      document.getElementById("hasilPopup").style.display = "flex";
    }

    function tutupPopup() {
      document.getElementById("hasilPopup").style.display = "none";
    }
  </script></body>
</html>
