<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Pengiriman | Logistik Kita</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body class="bg-gray-100">
  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-72 bg-black text-white flex flex-col p-4 space-y-4 transition-all duration-300">
      <div class="flex flex-col items-center mb-4">
        <img src="logo_logistikkita.png" alt="Logo" class="h-10 mb-2" />
        <h1 id="sidebarTitle" class="text-xl font-bold text-red-500">Logistik Kita</h1>
        <button onclick="toggleSidebar()" class="mt-2 text-sm bg-red-500 px-2 py-1 rounded">â˜°</button>
      </div>
      <nav class="flex flex-col gap-2">
        <a href="admin.html" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-gauge"></i> <span class="sidebar-text">Dashboard</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded bg-red-700"><i class="ph ph-truck"></i> <span class="sidebar-text">Data Pengiriman</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-pencil"></i> <span class="sidebar-text">CRUD Tarif per Kg</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-map-pin"></i> <span class="sidebar-text">Carter & Tarif Khusus</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-users"></i> <span class="sidebar-text">Mitra Driver</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-globe"></i> <span class="sidebar-text">Monitoring Armada</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-handshake"></i> <span class="sidebar-text">Referral</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-chart-bar"></i> <span class="sidebar-text">Laporan & Rekap</span></a>
        <a href="#" class="flex items-center gap-2 text-sm hover:bg-red-600 px-3 py-2 rounded"><i class="ph ph-gear"></i> <span class="sidebar-text">Pengaturan</span></a>
      </nav>
    </aside><!-- Main Content -->
<main class="flex-1 p-6">
  <header class="mb-4">
    <h2 class="text-2xl font-bold text-red-600">Data Pengiriman</h2>
    <div class="flex items-center gap-2 mt-2">
      <label for="bulanFilter" class="text-sm text-gray-700">Pilih Bulan:</label>
      <select id="bulanFilter" class="border rounded px-2 py-1">
        <option value="1">Januari</option>
        <option value="2">Februari</option>
        <option value="3">Maret</option>
        <option value="4">April</option>
        <option value="5">Mei</option>
        <option value="6">Juni</option>
        <option value="7">Juli</option>
        <option value="8">Agustus</option>
        <option value="9">September</option>
        <option value="10">Oktober</option>
        <option value="11">November</option>
        <option value="12">Desember</option>
      </select>
      <button onclick="filterByMonth()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded">Tampilkan</button>
    </div>
  </header>
  <table class="w-full bg-white rounded-xl shadow overflow-auto text-sm">
    <thead class="bg-red-100 text-left">
      <tr>
        <th class="p-2">Tanggal</th>
        <th class="p-2">Customer</th>
        <th class="p-2">Tujuan</th>
        <th class="p-2">Barang</th>
        <th class="p-2">Tarif</th>
        <th class="p-2">Status</th>
      </tr>
    </thead>
    <tbody id="dataTabel"></tbody>
  </table>
</main>

  </div>  <script>
    const SUPABASE_URL = "https://mrghlcedtafomwnznywf.supabase.co";
    const SUPABASE_API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1yZ2hsY2VkdGFmb213bnpueXdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMTAwMTcsImV4cCI6MjA2NTg4NjAxN30.vCLC9w8sT0-4uMLFt9c-3BsFeLVco68ajtsu2ZQUiWs";
    let allData = [];

    async function ambilData() {
      const res = await fetch(`${SUPABASE_URL}/rest/v1/Data_Barang?select=*`, {
        headers: {
          apikey: SUPABASE_API_KEY,
          Authorization: `Bearer ${SUPABASE_API_KEY}`
        }
      });

      if (res.ok) {
        allData = await res.json();
        filterByMonth();
      } else {
        console.error("Gagal mengambil data");
      }
    }

    function renderTable(data) {
      const tbody = document.getElementById("dataTabel");
      tbody.innerHTML = data.map(item => `
        <tr class="border-b hover:bg-gray-50">
          <td class="p-2">${item.tanggal_masuk}</td>
          <td class="p-2">${item.nama_customer}</td>
          <td class="p-2">${item.tujuan_kirim}</td>
          <td class="p-2">${item.nama_barang}</td>
          <td class="p-2">Rp ${Number(item.tarif_pengiriman).toLocaleString('id-ID')}</td>
          <td class="p-2">${item.status_kirim}</td>
        </tr>`).join("");
    }

    function filterByMonth() {
      const selectedMonth = parseInt(document.getElementById("bulanFilter").value);
      const filtered = allData.filter(item => {
        const date = new Date(item.tanggal_masuk);
        return date.getMonth() + 1 === selectedMonth;
      });
      renderTable(filtered);
    }

    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const textElements = sidebar.querySelectorAll(".sidebar-text");
      const title = document.getElementById("sidebarTitle");
      const closed = sidebar.classList.toggle("w-16");

      textElements.forEach(el => el.classList.toggle("hidden", closed));
      title.classList.toggle("hidden", closed);
    }

    ambilData();
  </script></body>
</html>
