<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cek Tarif Carter Logistik Kita - Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }
    .container {
      max-width: 860px;
      margin-top: 2rem;
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #ba1a1a;
    }
    #hasilPopup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    #hasilPopup .popup-box {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      max-width: 520px;
    }
    .logo {
      width: 180px;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
<div class="container">
  <img src="logo_logistikkita.png" alt="Logo Logistik Kita" class="logo">
  <h1 class="mb-4">📦 Cek Tarif Carter Logistik Kita - Admin</h1>  <div class="mb-3">
    <label class="form-label">🧍 Nama Customer</label>
    <input type="text" class="form-control" id="namaCustomer">
  </div>
  <div class="mb-3">
    <label class="form-label">📱 Nomor HP Customer</label>
    <input type="text" class="form-control" id="hpCustomer">
  </div>
  <div class="mb-3">
    <label class="form-label">📦 Nama Barang</label>
    <input type="text" class="form-control" id="namaBarang">
  </div>
  <div class="mb-3">
    <label class="form-label">⚖️ Berat Barang (kg)</label>
    <input type="number" class="form-control" id="beratBarang">
  </div>
  <div class="mb-3">
    <label class="form-label">📍 Lokasi Penjemputan</label>
    <input type="text" class="form-control" id="lokasiJemput">
  </div>
  <div class="mb-3">
    <label class="form-label">🏁 Lokasi Bongkar</label>
    <input type="text" class="form-control" id="lokasiBongkar">
  </div>
  <div class="mb-3">
    <label class="form-label">🔁 Jarak Kembali ke Garasi (km)</label>
    <input type="number" class="form-control" id="jarakKembali">
  </div>
  <div class="mb-3">
    <label class="form-label">🧑‍🔧 Biaya TKBM</label>
    <input type="number" class="form-control" id="biayaTKBM">
  </div>
  <div class="mb-3">
    <label class="form-label">🛣️ Biaya Tol</label>
    <input type="number" class="form-control" id="biayaTol">
  </div>
  <div class="mb-3">
    <label class="form-label">🅿️ Biaya Parkir</label>
    <input type="number" class="form-control" id="biayaParkir">
  </div>
  <div class="mb-3">
    <label class="form-label">📦 Biaya Lain-lain</label>
    <input type="number" class="form-control" id="biayaLain">
  </div>
  <div class="mb-3">
    <label class="form-label">📆 Jadwal Pengiriman</label>
    <input type="datetime-local" class="form-control" id="jadwalPengiriman">
  </div>
  <div class="mb-3">
    <label class="form-label">👤 Jenis Customer</label>
    <select class="form-select" id="jenisCustomer">
      <option value="perorangan">Perorangan</option>
      <option value="perusahaan">Perusahaan</option>
    </select>
  </div>
  <div class="d-grid gap-2">
    <button class="btn btn-danger" onclick="cekTarifAdmin()">🧮 Hitung & Simpan</button>
    <button class="btn btn-outline-secondary" onclick="cetakSuratJalan()">🖨️ Cetak Surat Jalan</button>
    <button class="btn btn-success" onclick="kirimWhatsApp()">📤 Kirim Invoice via WhatsApp</button>
  </div>
</div><div id="hasilPopup">
  <div class="popup-box">
    <h5 class="mb-3">💰 Ringkasan Tarif & Profit</h5>
    <div id="hasilTarifAdmin"></div>
    <button onclick="tutupPopup()" class="btn btn-outline-secondary btn-sm mt-3">Tutup</button>
  </div>
</div><script>
function cekTarifAdmin() {
  const berat = parseFloat(document.getElementById('beratBarang').value) || 0;
  const kembali = parseFloat(document.getElementById('jarakKembali').value) || 0;
  const tkbm = parseFloat(document.getElementById('biayaTKBM').value) || 0;
  const tol = parseFloat(document.getElementById('biayaTol').value) || 0;
  const parkir = parseFloat(document.getElementById('biayaParkir').value) || 0;
  const lain = parseFloat(document.getElementById('biayaLain').value) || 0;
  const jenis = document.getElementById('jenisCustomer').value;

  let sewa = 0, driver = 0, armada = 'Armada Khusus';
  if (berat <= 1300) { sewa = 150000; driver = 200000; armada = 'Granmax'; }
  else if (berat <= 2500) { sewa = 250000; driver = 250000; armada = 'L300'; }

  const bbm = (kembali / 9) * 10000;
  const operasional = sewa + driver + bbm + tkbm + tol + parkir + lain;
  let tarif = operasional * (jenis === 'perorangan' ? 1.15 : 1.25);
  const profit = tarif - operasional;

  const hasil = `
    <ul>
      <li>🚛 Armada: <strong>${armada}</strong></li>
      <li>💵 Tarif Customer: <strong>Rp ${Math.round(tarif).toLocaleString()}</strong></li>
      <li>📉 Biaya Operasional: Rp ${Math.round(operasional).toLocaleString()}</li>
      <li>📈 Profit Kotor: <strong class="text-success">Rp ${Math.round(profit).toLocaleString()}</strong></li>
    </ul>
  `;
  document.getElementById('hasilTarifAdmin').innerHTML = hasil;
  document.getElementById('hasilPopup').style.display = 'flex';
}

function tutupPopup() {
  document.getElementById('hasilPopup').style.display = 'none';
}

function cetakSuratJalan() {
  alert('📄 Fitur cetak surat jalan PDF dalam proses pengembangan...');
}

function kirimWhatsApp() {
  const nama = document.getElementById('namaCustomer').value || '-';
  const tarif = document.getElementById('hasilTarifAdmin').innerText.match(/Rp ([\d.,]+)/)?.[1] || '---';
  const hp = document.getElementById('hpCustomer').value.replace(/^0/, '62');
  const text = `Halo Kak ${nama}, berikut estimasi tarif carter Anda: %0A💰 Rp ${tarif} %0A~ Logistik Kita`;
  window.open(`https://wa.me/${hp}?text=${text}`, '_blank');
}
</script></body>
</html>
